<html>
  <head>
    <title>â™ª ë”©ë™ëŒ• ì½”ìŠ¤ë§¤í‹± â™ª</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="author" content="colorlib.com">
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,800" rel="stylesheet" />
    <link href="css/search.css" rel="stylesheet" />
  </head>
  <body>
    <script type="text/javascript">
      // ì›¹ ì„œë²„ë¥¼ ì ‘ì†í•œë‹¤.
      var webSocket = new WebSocket("ws://localhost:9998");
      // ì†Œì¼“ ì ‘ì†ì´ ë˜ë©´ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
      webSocket.onopen = function(message){
      };
      // ì†Œì¼“ ì ‘ì†ì´ ëë‚˜ë©´ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
      webSocket.onclose = function(message){
      };
      // ì†Œì¼“ í†µì‹  ì¤‘ì— ì—ëŸ¬ê°€ ë°œìƒë˜ë©´ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
      webSocket.onerror = function(message){
      };
      // ì†Œì¼“ ì„œë²„ë¡œ ë¶€í„° ë©”ì‹œì§€ê°€ ì˜¤ë©´ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜.
      webSocket.onmessage = function(message){
        var msgData = message.data;
        console.log(msgData);
        localStorage.clear();
        localStorage.setItem("queryResult", msgData);

        var queryList = msgData.split("\n");
        var trimmedList = [];
        for (var i = 0; i < queryList.length - 1; i++) {
          trimmedList.push(queryList[i]);
        }
        if (trimmedList.length == 1) {
          localStorage.clear();
          localStorage.setItem("queryResult", trimmedList[0]);
          window.location.href = "C:/Users/eunho/Desktop/pricingSytem/main.html";
        } else if (trimmedList.length > 1) {
          window.location.href = "C:/Users/eunho/Desktop/pricingSytem/sub.html";  
        } else {
          console.log(message.data);
        }
        disconnect();
      };
      function disconnect(){
        webSocket.close();
      }
    </script>
    <div class="s004">
      <form>
        <fieldset>
          <!-- <div>
            ìƒí’ˆ ì•Œë¦¼ ì„œë¹„ìŠ¤ â™ª ë”©ë™ëŒ• ì½”ìŠ¤ë§¤í‹± â™ª 
          </div> -->
          <legend id='logo'>ğŸµë”©ë™ëŒ• ì½”ìŠ¤ë§¤í‹±ğŸµ</legend>
          <legend style="color: black;">ğŸ”” ì•Œë¦¼ì„ ë°›ì„ ìƒí’ˆì„ ê²€ìƒ‰í•˜ì„¸ìš”!</legend>
          <div class="inner-form">
            <div class="input-field">
              <input class="form-control" id="choices-text-preset-values" type="text" placeholder="Type to search..." />
              <button id="search-button" class="btn-search" type="button">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"></path>
                </svg>
              </button>
              <script type="text/javascript">
                document.getElementById("search-button").onclick = function() {sendMessage()};

                function sendMessage(){
                  var message = document.getElementById("choices-text-preset-values");
                  var searchTexts = message.value.split(",");
                  localStorage.setItem("searchText", message.value);
                  var queryText = "";
                  if (searchTexts.length > 1) {
                    for (var i = 0; i < searchTexts.length; i++) {
                      queryText += searchTexts[i] + "\|";
                    }
                  } else {
                    queryText = message.value;
                  }
                  webSocket.send(queryText);
                  
                }
              </script>
            </div>
          </div>
          <div class="suggestion-wrap">
            <span></span>
            <div>ì¸ê¸° í‚¤ì›Œë“œ top5</div>
            <div>
              <span>ì˜¬ë¦¬ê³  íˆì•Œë£¨ë¡ ì‚° 5000í† ë„ˆ 500ml</span>
              <span>ë”ë§ˆ ì¸í…ì‹œë¸Œ íŒí…Œë†€ í¬ë¦¼ 50ml ê¸°íšì„¸íŠ¸</span>
              <span>ê·¸ë¦° ë§ˆì¼ë“œ ì—… ì„  í”ŒëŸ¬ìŠ¤ íŒŒì›ŒíŒ© ê¸°íšì„¸íŠ¸</span>
              <span>ì œë¡œ ëª¨ê³µíŒ¨ë“œ 2.0 </span>
              <span>ë ˆì´ì € ì¬ìŠ¤í¬ë¦¼ 1+1ê¸°íš</span>
            </div>
          </div>
        </fieldset>
      </form>
    </div>
    <script src="js/extention/choices.js"></script>
    <script>
      var textPresetVal = new Choices('#choices-text-preset-values',
      {
        removeItemButton: true,
      });

    </script>
  </body><!-- This templates was made by Colorlib (https://colorlib.com) -->
</html>
